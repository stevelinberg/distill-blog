<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>Useful R tidbits: Social Networks</title>

  <meta property="description" itemprop="description" content="Tasty R snacks that do useful things in Social Networks"/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2022-02-08"/>
  <meta property="article:created" itemprop="dateCreated" content="2022-02-08"/>
  <meta name="article:author" content="Steve Linberg"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Useful R tidbits: Social Networks"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Tasty R snacks that do useful things in Social Networks"/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Useful R tidbits: Social Networks"/>
  <meta property="twitter:description" content="Tasty R snacks that do useful things in Social Networks"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","categories"]}},"value":[{"type":"character","attributes":{},"value":["Useful R tidbits: Social Networks"]},{"type":"character","attributes":{},"value":["Tasty R snacks that do useful things in Social Networks\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Steve Linberg"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":[]}},"value":[]}]}]},{"type":"character","attributes":{},"value":["2022-02-08"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"character","attributes":{},"value":["r","social networks"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["ps753-useful-r-tidbits_files/anchor-4.2.2/anchor.min.js","ps753-useful-r-tidbits_files/bowser-1.9.3/bowser.min.js","ps753-useful-r-tidbits_files/distill-2.2.21/template.v2.js","ps753-useful-r-tidbits_files/header-attrs-2.11/header-attrs.js","ps753-useful-r-tidbits_files/jquery-3.6.0/jquery-3.6.0.js","ps753-useful-r-tidbits_files/jquery-3.6.0/jquery-3.6.0.min.js","ps753-useful-r-tidbits_files/jquery-3.6.0/jquery-3.6.0.min.map","ps753-useful-r-tidbits_files/popper-2.6.0/popper.min.js","ps753-useful-r-tidbits_files/tippy-6.2.7/tippy-bundle.umd.min.js","ps753-useful-r-tidbits_files/tippy-6.2.7/tippy-light-border.css","ps753-useful-r-tidbits_files/tippy-6.2.7/tippy.css","ps753-useful-r-tidbits_files/tippy-6.2.7/tippy.umd.min.js","ps753-useful-r-tidbits_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          return "<p>" + $('#ref-' + ref).html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="ps753-useful-r-tidbits_files/header-attrs-2.13/header-attrs.js"></script>
  <script src="ps753-useful-r-tidbits_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="ps753-useful-r-tidbits_files/popper-2.6.0/popper.min.js"></script>
  <link href="ps753-useful-r-tidbits_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="ps753-useful-r-tidbits_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="ps753-useful-r-tidbits_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="ps753-useful-r-tidbits_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="ps753-useful-r-tidbits_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="ps753-useful-r-tidbits_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="ps753-useful-r-tidbits_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Useful R tidbits: Social Networks","description":"Tasty R snacks that do useful things in Social Networks","authors":[{"author":"Steve Linberg","authorURL":{},"affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-02-08T00:00:00.000-05:00","citationText":"Linberg, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Useful R tidbits: Social Networks</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt=tag">r</div>
<div class="dt=tag">social networks</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>Tasty R snacks that do useful things in Social Networks</p></p>
</div>

<div class="d-byline">
  Steve Linberg true 
  
<br/>2022-02-08
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#prelude-finding-data-to-play-with">Prelude: finding data
to play with</a></li>
<li><a href="#week-1-tutorial-cheatsheet">Week 1 tutorial cheatsheet</a>
<ul>
<li><a href="#getting-the-basic-network-descriptors">Getting the basic
network descriptors</a></li>
</ul></li>
<li><a href="#week-2-cheatsheet">Week 2 cheatsheet</a>
<ul>
<li><a href="#transitivity">Transitivity</a></li>
</ul></li>
<li><a href="#degree">Degree</a>
<ul>
<li><a href="#indegree-and-outdegree-calculations"><em>Indegree</em> and
<em>outdegree</em> calculations</a></li>
</ul></li>
<li><a href="#components">Components</a></li>
<li><a href="#graph-density">Graph density</a></li>
<li><a href="#network-degree-centralization">Network degree
centralization</a>
<ul>
<li><a href="#eigenvector-centralization">Eigenvector
centralization</a></li>
<li><a href="#bonacich-power-centrality">Bonacich Power
Centrality</a></li>
<li><a href="#derived-and-reflected-centrality">Derived and Reflected
Centrality</a></li>
</ul></li>
<li><a href="#week-5-big-block-of-basic-code">Week 5: Big Block of Basic
Code</a>
<ul>
<li><a href="#closeness-centrailty">Closeness centrailty</a></li>
<li><a href="#closeness-centralization">Closeness
centralization</a></li>
<li><a href="#betweenness-centrality">Betweenness centrality</a></li>
<li><a href="#betweenness-centralization">Betweenness
centralization</a></li>
<li><a href="#burts-network-constraint">(Burt’s) network
constraint</a></li>
<li><a href="#gould-fernandez-brokerage">Gould-Fernandez
Brokerage</a></li>
</ul></li>
<li><a href="#week-6">Week 6</a></li>
</ul>
</nav>
</div>
<p style="background: #eee">
<a href="/"><i class="fas fa-home"></i></a> &gt; Academics &gt; <a
href="../ps753/index.html">PS753</a> &gt; Useful R tidbits
</p>
<p>This document contains R snippets pertaining to work in the <a
href="../ps753/index.html">Social Networks class</a>. There is also one
for the <a href="../ms797-useful-r-tidbits/index.html">Machine Learning
class</a>.</p>
<h2 id="prelude-finding-data-to-play-with">Prelude: finding data to play
with</h2>
<p>Since in the class tutorials, the network objects are pre-loaded in
the web-based runtime environments, we don’t actually see how to load
some of the data sets that the exercises are based on, for running
outside of this environment.</p>
<p>There are gazillions of ways to get data into R, but for the purposes
of playing with networks, there are some packages with pre-existing
network data that can be easily loaded. Two of these are
<code>igraphdata</code>, which contains igraph-formatted network
datasets, and <code>ergm</code>, which contains statnet-compatible
network datasets.</p>
<p>The datasets in each can be listed with the <code>data</code>
command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">data</span>(<span class="at">package =</span> <span class="st">&quot;igraphdata&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>Data sets <span class="cf">in</span> package ‘igraphdata’<span class="sc">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>Koenigsberg              Bridges of Koenigsberg from Euler<span class="st">&#39;s times</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="st">UKfaculty                Friendship network of a UK university faculty</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="st">USairports               US airport network, 2010 December</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="st">enron                    Enron Email Network</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="st">foodwebs                 A collection of food webs</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="st">immuno                   Immunoglobulin interaction network</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="st">karate                   Zachary&#39;</span>s karate club network</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>kite                     Krackhardt<span class="st">&#39;s kite</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="st">macaque                  Visuotactile brain areas and connections</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="st">rfid                     Hospital encounter network data</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="st">yeast                    Yeast protein interaction network</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; data(package = &quot;ergm&quot;)</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="st">Data sets in package ‘ergm’:</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="st">cohab_MixMat (cohab)     Target statistics and model fit to a hypothetical</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="st">                         50,000-node network population with 50,000 nodes</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="st">                         based on egocent</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="st">cohab_PopWts (cohab)     Target statistics and model fit to a hypothetical</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="st">                         50,000-node network population with 50,000 nodes</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="st">                         based on egocent</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="st">cohab_TargetStats (cohab)</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="st">                         Target statistics and model fit to a hypothetical</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="st">                         50,000-node network population with 50,000 nodes</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="st">                         based on egocent</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="st">ecoli1 (ecoli)           Two versions of an E. Coli network dataset</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="st">ecoli2 (ecoli)           Two versions of an E. Coli network dataset</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="st">faux.desert.high         Faux desert High School as a network object</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="st">faux.dixon.high          Faux dixon High School as a network object</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="st">faux.magnolia.high       Goodreau&#39;</span>s Faux Magnolia High School as a network</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>                         object</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>faux.mesa.high           Goodreau<span class="st">&#39;s Faux Mesa High School as a network</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="st">                         object</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="st">flobusiness (florentine)</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="st">                         Florentine Family Marriage and Business Ties Data</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="st">                         as a &quot;network&quot; object</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="st">flomarriage (florentine)</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="st">                         Florentine Family Marriage and Business Ties Data</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="st">                         as a &quot;network&quot; object</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="st">g4                       Goodreau&#39;</span>s four node network as a <span class="st">&quot;network&quot;</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>                         object</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>kapferer                 Kapferer<span class="st">&#39;s tailor shop data</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="st">kapferer2 (kapferer)     Kapferer&#39;</span>s tailor shop data</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>molecule                 Synthetic network with <span class="dv">20</span> nodes and <span class="dv">28</span> edges</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="fu">samplike</span> (sampson)       Cumulative network of positive affection within a</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>                         monastery as a <span class="st">&quot;network&quot;</span> object</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="fu">samplk1</span> (samplk)         Longitudinal networks of positive affection</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>                         within a monastery as a <span class="st">&quot;network&quot;</span> object</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="fu">samplk2</span> (samplk)         Longitudinal networks of positive affection</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>                         within a monastery as a <span class="st">&quot;network&quot;</span> object</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="fu">samplk3</span> (samplk)         Longitudinal networks of positive affection</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>                         within a monastery as a <span class="st">&quot;network&quot;</span> object</span></code></pre></div>
<p>To load the statnet “florentine” data from the <code>ergm</code>
package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">data</span>(<span class="st">&quot;florentine&quot;</span>, <span class="at">package =</span> <span class="st">&quot;ergm&quot;</span>)</span></code></pre></div>
<p>This creates the objects <code>flobusiness</code> and
<code>flomarriage</code>, both from this dataset, ready to go in
statnet. Note that another version of this dataset is found in the
<code>network</code> package <code>flo</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;flo&quot;</span>, <span class="at">package =</span> <span class="st">&quot;network&quot;</span>)</span></code></pre></div>
<p>This loads the very simple data into a matrix, but it is not yet a
network object. To convert it to an igraph object:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(network)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(flo)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>ntwk.ig <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(flo)</span></code></pre></div>
<h2 id="week-1-tutorial-cheatsheet">Week 1 tutorial cheatsheet</h2>
<table>
<thead>
<tr class="header">
<th></th>
<th>igraph</th>
<th>statnet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Count of vertices</td>
<td><code>vcount()</code></td>
<td></td>
</tr>
<tr class="even">
<td>Count of edges</td>
<td><code>ecount()</code></td>
<td></td>
</tr>
<tr class="odd">
<td>Both</td>
<td></td>
<td><code>print()</code></td>
</tr>
<tr class="even">
<td>Bipartite or single mode?</td>
<td><code>is_bipartite()</code></td>
<td><code>print()</code></td>
</tr>
<tr class="odd">
<td>Edges directed or undirected?</td>
<td><code>is_directed()</code></td>
<td><code>print()</code></td>
</tr>
<tr class="even">
<td>Weighted? (or binary)</td>
<td><code>is_weighted()</code></td>
<td><code>print()</code></td>
</tr>
</tbody>
</table>
<dl>
<dt>vertex attribute</dt>
<dd>
vector of additional information about nodes in a network
</dd>
<dt>edge attribute</dt>
<dd>
vector of additional information about the edges in a network
</dd>
</dl>
<p>Q: how to get missing edge count in igraph?</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>igraph</th>
<th>statnet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>display vertex attributes</td>
<td><code>vertex_attr_names()</code></td>
<td><code>list.vertex.attributes()</code></td>
</tr>
<tr class="even">
<td>display edge attributes</td>
<td><code>edge_attr_names()</code></td>
<td><code>list.edge.attributes()</code></td>
</tr>
</tbody>
</table>
<p>In igraph, attributes are accessed via <code>$</code>, using the
<code>V</code> and <code>E</code> functions, as in:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(karate.ig)<span class="sc">$</span>name</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(karate.ig)<span class="sc">$</span>weight</span></code></pre></div>
<p>In statnet, they are accessed via the <code>%v%</code> and
<code>%e%</code> mechanisms, as in:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>karate.stat <span class="sc">%v%</span> <span class="st">&quot;vertex.names&quot;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>karate.stat <span class="sc">%e%</span> <span class="st">&quot;weight&quot;</span></span></code></pre></div>
<h3 id="getting-the-basic-network-descriptors">Getting the basic network
descriptors</h3>
<p>First look at any network is to examine the network <em>size</em>,
<em>type</em> (un/directed, un/weighted, bipartite) and available
<em>attributes of vertices and edges</em>.</p>
<h4 id="igraph">igraph</h4>
<p>Basic descriptors first:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vcount</span>(climpref.ig)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">34</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ecount</span>(climpref.ig)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">531</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">is_bipartite</span>(climpref.ig)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">is_directed</span>(climpref.ig)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="fu">is_weighted</span>(climpref.ig)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>Listing vertex and edge attributes:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">vertex_attr_names</span>(climpref.ig)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;name&quot;</span>                 <span class="st">&quot;Climate.council&quot;</span>      <span class="st">&quot;Klimaallianz&quot;</span>        </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>] <span class="st">&quot;Stiftung.Klimarappen&quot;</span> <span class="st">&quot;type3&quot;</span>                <span class="st">&quot;type5&quot;</span>               </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">7</span>] <span class="st">&quot;dm&quot;</span>                  </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">edge_attr_names</span>(climpref.ig)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;weight&quot;</span></span></code></pre></div>
<p>Accessing vertex and edge attributes:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">V</span>(climpref.ig)<span class="sc">$</span>name <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;AA&quot;</span> <span class="st">&quot;AB&quot;</span> <span class="st">&quot;AC&quot;</span> <span class="st">&quot;AD&quot;</span> <span class="st">&quot;AE&quot;</span> <span class="st">&quot;AF&quot;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(climpref.ig)<span class="sc">$</span>weight <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.69</span> <span class="fl">0.08</span> <span class="fl">0.04</span> <span class="fl">0.18</span> <span class="fl">0.42</span> <span class="fl">0.21</span></span></code></pre></div>
<h4 id="statnet">statnet</h4>
<p>The basic descriptors in statnet are all <em>shown</em> by
print():</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">print</span>(flobusiness)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a> Network attributes<span class="sc">:</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  vertices <span class="ot">=</span> <span class="dv">16</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  directed <span class="ot">=</span> <span class="cn">FALSE</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  hyper <span class="ot">=</span> <span class="cn">FALSE</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  loops <span class="ot">=</span> <span class="cn">FALSE</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  multiple <span class="ot">=</span> <span class="cn">FALSE</span> </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  bipartite <span class="ot">=</span> <span class="cn">FALSE</span> </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  total edges<span class="ot">=</span> <span class="dv">15</span> </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    missing edges<span class="ot">=</span> <span class="dv">0</span> </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    non<span class="sc">-</span>missing edges<span class="ot">=</span> <span class="dv">15</span> </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a> Vertex attribute names<span class="sc">:</span> </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    priorates totalties vertex.names wealth </span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>No edge attributes</span></code></pre></div>
<p>It appears, though it’s thinly documented, that these attributes are
programmatically accessible through the <code>$gal</code> attribute, as
in <code>is_directed &lt;- flobusiness$gal$directed</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> flobusiness<span class="sc">$</span>gal</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>n</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">16</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>mnext</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">16</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>directed</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>hyper</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>loops</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>multiple</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>bipartite</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span></code></pre></div>
<h2 id="week-2-cheatsheet">Week 2 cheatsheet</h2>
<p>A dyad census will count the reciprocal (<code>mut</code>),
asymmetric (<code>asym</code>) and absent (<code>null</code>) dyads,
based on directed graphs. In igraph:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">dyad.census</span>(trade2007.ig)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>mut</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">11444</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>asym</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3148</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>null</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2244</span></span></code></pre></div>
<p>In statnet:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>sna<span class="sc">::</span><span class="fu">dyad.census</span>()</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>]   <span class="dv">6225</span>  <span class="dv">19035</span>  <span class="dv">40611</span>   <span class="dv">6442</span>   <span class="dv">7044</span>  <span class="dv">10097</span>  <span class="dv">55355</span>  <span class="dv">44966</span>   <span class="dv">9200</span>   <span class="dv">1876</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>] <span class="dv">146537</span>  <span class="dv">25578</span>  <span class="dv">17167</span>  <span class="dv">30894</span> <span class="dv">225908</span> <span class="dv">374449</span></span></code></pre></div>
<p>Triad census is similar:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">triad_census</span>(trade2007.ig)</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>sna<span class="sc">::</span><span class="fu">triad.census</span>(gotbook.stat, <span class="at">mode=</span><span class="st">&quot;graph&quot;</span>)  <span class="co"># undirected</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>sna<span class="sc">::</span><span class="fu">triad.census</span>(trade2007.stat)              <span class="co"># directed</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>      <span class="dv">003</span>   <span class="dv">012</span>   <span class="dv">102</span> 021D 021U 021C  111D  111U 030T 030C   <span class="dv">201</span>  120D</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="dv">6225</span> <span class="dv">13655</span> <span class="dv">26489</span> <span class="dv">4225</span> <span class="dv">4657</span> <span class="dv">4821</span> <span class="dv">34812</span> <span class="dv">23635</span> <span class="dv">4374</span>  <span class="dv">537</span> <span class="dv">97088</span> <span class="dv">15073</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>     120U  120C    <span class="dv">210</span>    <span class="dv">300</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="dv">7947</span> <span class="dv">14249</span> <span class="dv">136169</span> <span class="dv">283855</span></span></code></pre></div>
<p>Note that the <code>statnet</code> version gives us information about
the types of triads as column names in the matrix it returns. The
<code>igraph</code> version also breaks them into the 16 categories, but
returns them in a fixed order not detailed in its return value
(described in its help documentation).</p>
<p>The total number of possible triads in a 298 vertex network is (298 x
297 x 296) / (3 x 2 x 1) - the 3 countdown comes from “triad”. Quads
would be (298 x 297 x 296 x 295) / (4 x 3 x 2 x 1).</p>
<h3 id="transitivity">Transitivity</h3>
<p>Transitivity is the percentage of potential connected triads - how
many are complete. Basic way in igraph is <code>transitivity()</code>.
The statnet version is <code>gtrans()</code>, but it only works in
directed networks. <code>print()</code> will say whether the network is
directed. (Note: in the tutorial, we see that the climate network IS
directed, but it returns a different result than igraph: 0.627 vs 0.724.
Not clear why. “it is calculating a transitivity score based on an
understanding of network structure rooted in hierarchy”)</p>
<p>Local transitivity is the <code>local clustering coefficient</code> -
how many nodes of an ego are connected to each other. Have to unpack
this, but the magic is:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(gotbook.ig, <span class="at">type=</span><span class="st">&quot;local&quot;</span>, </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">vids=</span><span class="fu">V</span>(gotbook.ig)[</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;Petyr Baelish&quot;</span>,<span class="st">&quot;Jon Snow&quot;</span>, <span class="st">&quot;Tyrion Lannister&quot;</span>)]) </span></code></pre></div>
<p>The global clustering coefficient in igraph is</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(trade2007.ig, <span class="at">type=</span><span class="st">&quot;global&quot;</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.8837142</span></span></code></pre></div>
<p>The local coefficient is:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(trade2007.ig, <span class="at">type=</span><span class="st">&quot;average&quot;</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.8862707</span></span></code></pre></div>
<p>Network transitivity in statnet is <code>gtrans()</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gtrans</span>(trade2007.stat)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.9993143</span></span></code></pre></div>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>igraph</th>
<th>statnet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>global clustering coefficient</td>
<td><code>transitivity(trade2007.ig,  type="global")</code></td>
<td><code>gtrans(trade2007.stat)</code> (directed only)</td>
</tr>
<tr class="even">
<td>local clustering coefficient</td>
<td><code>transitivity(trade2007.ig,  type="local")</code></td>
<td>???</td>
</tr>
<tr class="odd">
<td>average local clustering coefficient</td>
<td><code>transitivity(trade2007.ig,  type="average")</code></td>
<td>???</td>
</tr>
</tbody>
</table>
<h2 id="degree">Degree</h2>
<p><code>igraph::degree()</code> and <code>statnet::degree()</code>, and
once again they give different results; igraph includes loops, statnet
doesn’t. Force igraph to ignore them with <code>loops = FALSE</code>.
“Note that setting <code>diag=TRUE</code> in <code>sna::degree</code>
does not guarantee equivalence as statnet only single counts the loops
in a directed network, while igraph double-counts the loops.”</p>
<p>igraph shows the node names, statnet doesn’t.</p>
<p>Getting the degree of a particular set of nodes in
<code>igraph</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> igraph<span class="sc">::</span><span class="fu">degree</span>(trade2007.ig, <span class="at">v =</span> <span class="fu">V</span>(trade2007.ig)[<span class="fu">c</span>(<span class="st">&quot;China&quot;</span>, <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;Denmark&quot;</span>)])</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>         China         Canada United Kingdom        Denmark </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>           <span class="dv">364</span>            <span class="dv">364</span>            <span class="dv">364</span>            <span class="dv">362</span> </span></code></pre></div>
<p>This can also be done by index, as in:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> igraph<span class="sc">::</span><span class="fu">degree</span>(flo_ig, <span class="at">v =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>Acciaiuoli    Albizzi  Barbadori </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>         <span class="dv">2</span>          <span class="dv">6</span>          <span class="dv">4</span> </span></code></pre></div>
<p>Statnet degrees aren’t named:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> sna<span class="sc">::</span><span class="fu">degree</span>(flo_stat)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>]  <span class="dv">2</span>  <span class="dv">6</span>  <span class="dv">4</span>  <span class="dv">6</span>  <span class="dv">6</span>  <span class="dv">2</span>  <span class="dv">8</span>  <span class="dv">2</span> <span class="dv">12</span>  <span class="dv">2</span>  <span class="dv">6</span>  <span class="dv">0</span>  <span class="dv">6</span>  <span class="dv">4</span>  <span class="dv">8</span>  <span class="dv">6</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">which</span>(sna<span class="sc">::</span><span class="fu">degree</span>(flo_stat) <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">12</span></span></code></pre></div>
<h3 id="indegree-and-outdegree-calculations"><em>Indegree</em> and
<em>outdegree</em> calculations</h3>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>igraph</th>
<th>statnet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>indegree</td>
<td><code>igraph::degree(climate.ig,mode="in", loops = FALSE)</code></td>
<td><code>sna::degree(climate.stat, cmode="indegree")</code></td>
</tr>
<tr class="even">
<td>outdegree</td>
<td><code>igraph::degree(climate.ig,mode="out", loops = FALSE)</code></td>
<td><code>sna::degree(climate.stat, cmode="outdegree")</code></td>
</tr>
</tbody>
</table>
<p>Code from the tutorial to create <code>data.frame</code>s with degree
statistics:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#igraph:</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>trade2007.nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">V</span>(trade2007.ig)<span class="sc">$</span>name,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">totdegree =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(trade2007.ig, <span class="at">loops =</span> <span class="cn">FALSE</span>),</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">indegree =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(trade2007.ig, <span class="at">mode =</span> <span class="st">&quot;in&quot;</span>, <span class="at">loops =</span> <span class="cn">FALSE</span>),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdegree =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(trade2007.ig, <span class="at">mode =</span> <span class="st">&quot;out&quot;</span>, <span class="at">loops =</span> <span class="cn">FALSE</span>))</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#statnet version:</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>trade2007.nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> trade2007.stat<span class="sc">%v%</span><span class="st">&quot;vertex.names&quot;</span>,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">totdegree =</span> sna<span class="sc">::</span><span class="fu">degree</span>(trade2007.stat),</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">indegree =</span> sna<span class="sc">::</span><span class="fu">degree</span>(trade2007.stat, <span class="at">cmode =</span> <span class="st">&quot;indegree&quot;</span>),</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdegree =</span> sna<span class="sc">::</span><span class="fu">degree</span>(trade2007.stat, <span class="at">cmode =</span> <span class="st">&quot;outdegree&quot;</span>))</span></code></pre></div>
<h2 id="components">Components</h2>
<p>Shortest path length between 2 nodes: igraph <code>distances()</code>
does this.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distances</span>(gotbook.ig,<span class="st">&quot;Petyr Baelish&quot;</span>,<span class="st">&quot;Robb Stark&quot;</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate distance using unweighted edges</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">distances</span>(gotbook.ig,<span class="st">&quot;Petyr Baelish&quot;</span>,<span class="st">&quot;Robb Stark&quot;</span>, <span class="at">weights=</span><span class="cn">NA</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># list shortest paths between 2 nodes</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">all_shortest_paths</span>(gotbook.ig,<span class="st">&quot;Bronn&quot;</span>,<span class="st">&quot;Varys&quot;</span>, <span class="at">weights=</span><span class="cn">NA</span>)<span class="sc">$</span>res</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#find average shortest path for network</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">average.path.length</span>(gotbook.ig,<span class="at">directed=</span>F)</span></code></pre></div>
<p>Component structure and membership</p>
<p><em>Note</em>: a graph is fully connected if its number of components
is 1. igraph returns this as the <code>no</code> parameter of
<code>igraph::components()</code>; it appears that statnet has no
parallel function, but if the number of isolates is 0, the graph is
connected (<code>sna::isolates()</code>).</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What element are returned by components</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(igraph<span class="sc">::</span><span class="fu">components</span>(gotbook.ig))</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of components</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">components</span>(gotbook.ig)<span class="sc">$</span>no </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Size of each component</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">components</span>(gotbook.ig)<span class="sc">$</span>csize </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co"># retrieve the index of isolate nodes</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co"># (nodes with component count of 1 from &quot;components&quot; above)</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="fu">isolates</span>(gotbook.stat)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co"># There is no direct command in igraph, but we can do this:</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of the degree of each node in the network</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>deg_counts <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">degree</span>(gotbook.ig, <span class="at">loops =</span> <span class="cn">FALSE</span>)</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="co"># filter and count the nodes with 0 degrees (or any other quantity of interest)</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(deg_counts[deg_counts <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="co"># subset vertex.names attribute to get names of isolates</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="fu">as.vector</span>(gotbook.stat <span class="sc">%v%</span> <span class="st">&#39;vertex.names&#39;</span>)[<span class="fu">c</span>(<span class="fu">isolates</span>(gotbook.stat))] <span class="sc">%&gt;%</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a><span class="do">##   [1] &quot;Aegon Frey (Jinglebell)&quot;         &quot;Alebelly&quot;                       </span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="do">##   [3] &quot;Alfyn&quot;                           &quot;Allar Deem&quot;                     </span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="do">##   [5] &quot;Antario Jast&quot;                    &quot;Balman Byrch&quot;    </span></span></code></pre></div>
<h2 id="graph-density">Graph density</h2>
<p>Note: <code>network.density()</code> (statnet) ignores edge values
“at present”.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get network density: igraph</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">graph.density</span>(climate.ig)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.4117647</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#get network density: statnet</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">network.density</span>(climate.stat)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.399654</span></span></code></pre></div>
<p>Adding <code>loops = TRUE</code> to <code>graph.density()</code>
appears to fix the problem and gets the two packages to agree:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get network density without loops: igraph</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">graph.density</span>(climate.ig, <span class="at">loops=</span><span class="cn">TRUE</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.399654</span></span></code></pre></div>
<p><em>SO</em>, it’s safest to always do either: -
<code>graph.density(climate.ig, loops=TRUE)</code> (igraph), OR -
<code>network.density(climate.stat)</code> (statnet)</p>
<p>In statnet, we can get network density with loops (nodes connecting
to themselves) omitted:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get network density without loops: statnet</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gden</span>(climate.stat, <span class="at">diag=</span><span class="cn">FALSE</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.3921569</span></span></code></pre></div>
<h2 id="network-degree-centralization">Network degree
centralization</h2>
<p>In <code>statnet</code>, call <code>centralization()</code> with the
<code>degree</code> function and appropriate parameters for
<code>degree</code> in the <code>cmode</code> argument:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>(climate.stat, degree, <span class="at">cmode=</span><span class="st">&quot;indegree&quot;</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>(climate.stat, degree, <span class="at">cmode=</span><span class="st">&quot;outdegree&quot;</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>(climate.stat, degree, <span class="at">cmode=</span><span class="st">&quot;freeman&quot;</span>) <span class="co"># default</span></span></code></pre></div>
<p>Could also call it with other <code>sna</code> functions like
<code>betweenness</code>, <code>closeness</code></p>
<p>The <code>igraph</code> version uses <code>centr_degree()</code> and
returns an object with several components, of which
<code>centralization</code> is one:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centr_degree</span>(climate.ig, <span class="at">loops =</span> <span class="cn">FALSE</span>, <span class="at">mode =</span> <span class="st">&quot;in&quot;</span>)<span class="sc">$</span>centralization</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">centr_degree</span>(climate.ig, <span class="at">loops =</span> <span class="cn">FALSE</span>, <span class="at">mode =</span> <span class="st">&quot;out&quot;</span>)<span class="sc">$</span>centralization</span></code></pre></div>
<h3 id="eigenvector-centralization">Eigenvector centralization</h3>
<p><code>statnet</code> uses <code>evcent()</code> to calculate the
eigenvalue centrality score for each node in the network:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">evcent</span>(imf2014.stat, <span class="at">ignore.eval=</span><span class="cn">TRUE</span>)<span class="er">)</span></span></code></pre></div>
<p>Eigenvector centrality index for the network:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>(imf2014.stat, evcent)</span></code></pre></div>
<p>In <code>igraph</code>, a set of eigenvector-related information is
created with <code>centr_eigen()</code>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If the network is directed, specify &quot;directed - T&quot; - will not auto-detect</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>eigen_info <span class="ot">&lt;-</span> <span class="fu">centr_eigen</span>(imf2014.ig, <span class="at">directed =</span> T)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Centrality score for node 3:</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>eigen_info[<span class="dv">3</span>]<span class="sc">$</span>vector</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Eigenveector centrality index for the network:</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>eigen_info<span class="sc">$</span>centralization</span></code></pre></div>
<p><strong>The scores calculated by <code>igraph</code> and
<code>statnet</code> are different. We aren’t sure why.</strong> It
appears that igraph <a
href="https://stackoverflow.com/questions/21035598/what-is-evcent-returning-for-directed-graphs">counts
incoming ties to calculate eigenvector centrality</a>, and statnet <a
href="http://mailman13.u.washington.edu/pipermail/statnet_help/2015/002170.html">recommends
using Bonachic power instead for directed networks</a>.</p>
<h3 id="bonacich-power-centrality">Bonacich Power Centrality</h3>
<p><code>igraph</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">power_centrality</span>(imf2014.ig)</span></code></pre></div>
<p><code>statnet</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bonpow</span>(imf2014.stat)</span></code></pre></div>
<p>Again, there appear to be some inconsistency between
<code>igraph</code> and <code>statnet</code> in the calculations, with
statnet apparently not incorporating weights and failing on singular
matrices.</p>
<h3 id="derived-and-reflected-centrality">Derived and Reflected
Centrality</h3>
<p>There are no library routines for these calculations. Convert the
data to a matrix first:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>mat2014 <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">as_adjacency_matrix</span>(imf2014.ig, <span class="at">attr=</span><span class="st">&quot;weight&quot;</span>))</span></code></pre></div>
<blockquote>
<p>To calculate the proportion of centrality that is received, we first
square the adjacency matrix. The diagonal of the adjacency matrix is
equal to the the square of node degree. We then divide this diagonal
(sqared degree) by total sqaured indegree (calculated by rowSums) to get
the proportion of received centrality.</p>
</blockquote>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># square the adjacency matrix</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>mat2014sq <span class="ot">&lt;-</span> <span class="fu">t</span>(mat2014) <span class="sc">%*%</span> mat2014</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the proportion of reflected centrality.</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>rc <span class="ot">&lt;-</span> <span class="fu">diag</span>(mat2014sq) <span class="sc">/</span> <span class="fu">rowSums</span>(mat2014sq)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># freplace missing values with 0</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>rc <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.nan</span>(imf2014.nodes<span class="sc">$</span>rc), <span class="dv">0</span>, imf2014.nodes<span class="sc">$</span>rc)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate received eigenvalue centrality</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>eigen.rc <span class="ot">&lt;-</span> imf2014.nodes<span class="sc">$</span>eigen <span class="sc">*</span> imf2014.nodes<span class="sc">$</span>rc</span></code></pre></div>
<blockquote>
<p>If total centraltiy is 1, then derived centrality is simply 1 - the
proportion of eigenvector centrality due to received centrality.</p>
</blockquote>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the proportion of derived centrality.</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>dc <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">diag</span>(mat2014sq) <span class="sc">/</span> <span class="fu">rowSums</span>(mat2014sq)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># replace missing values with 0</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>dc <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.nan</span>(imf2014.nodes<span class="sc">$</span>dc), <span class="dv">1</span>, imf2014.nodes<span class="sc">$</span>dc)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate received eigenvalue centrality</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>eigen.dc <span class="ot">&lt;-</span> imf2014.nodes<span class="sc">$</span>eigen <span class="sc">*</span> imf2014.nodes<span class="sc">$</span>dc</span></code></pre></div>
<h2 id="week-5-big-block-of-basic-code">Week 5: Big Block of Basic
Code</h2>
<p>Big Blocks of Basic Code to get a bunch of measures of a network:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the basic stuff we can do all at once with igraph</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>climinfl.nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name      =</span> <span class="fu">V</span>(climinfl.ig)<span class="sc">$</span>name,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">totdegree =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(climinfl.ig, <span class="at">loops=</span><span class="cn">FALSE</span>),</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">indegree  =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(climinfl.ig, <span class="at">mode=</span><span class="st">&quot;in&quot;</span>, <span class="at">loops=</span><span class="cn">FALSE</span>),</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdegree =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(climinfl.ig, <span class="at">mode=</span><span class="st">&quot;out&quot;</span>, <span class="at">loops=</span><span class="cn">FALSE</span>),</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">eigen     =</span> <span class="fu">centr_eigen</span>(climinfl.ig, <span class="at">directed =</span> T)<span class="sc">$</span>vector,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">bonanich  =</span> <span class="fu">power_centrality</span>(climinfl.ig),</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">centr_clo =</span> igraph<span class="sc">::</span><span class="fu">closeness</span>(climinfl.ig),</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">centr_btw =</span> igraph<span class="sc">::</span><span class="fu">betweenness</span>(climinfl.ig, <span class="at">directed =</span> <span class="cn">FALSE</span>),</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># igraph only</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">burt      =</span> <span class="fu">constraint</span>(climinfl.ig)</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Network-level measures:</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   closeness centralization</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>climinfl.centr_clo <span class="ot">=</span> <span class="fu">centr_clo</span>(climpref.ig)<span class="sc">$</span>centralization</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   betweenness centralization</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>climinfl.centr_btw <span class="ot">=</span> <span class="fu">centr_betw</span>(climpref.ig, <span class="at">directed =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>centralization</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a><span class="co"># statnet version</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>climinfl.nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">name      =</span> climinfl.stat <span class="sc">%v%</span> <span class="st">&quot;vertex.names&quot;</span>,</span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">totdegree =</span> sna<span class="sc">::</span><span class="fu">degree</span>(climinfl.stat),</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">indegree  =</span> sna<span class="sc">::</span><span class="fu">degree</span>(climinfl.stat, <span class="at">cmode =</span> <span class="st">&quot;indegree&quot;</span>),</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdegree =</span> sna<span class="sc">::</span><span class="fu">degree</span>(climinfl.stat, <span class="at">cmode =</span> <span class="st">&quot;outdegree&quot;</span>),</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">eigen     =</span> sna<span class="sc">::</span><span class="fu">evcent</span>(climinfl.stat, <span class="at">ignore.eval =</span> <span class="cn">TRUE</span>),</span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">bonanich  =</span> sna<span class="sc">::</span><span class="fu">bonpow</span>(climinfl.stat),</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">centr_clo =</span> sna<span class="sc">::</span><span class="fu">closeness</span>(climinfl.stat, <span class="at">gmode =</span> <span class="st">&quot;graph&quot;</span>,</span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>                               <span class="at">cmode =</span> <span class="st">&quot;suminvundir&quot;</span>),</span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">centr_btw =</span> sna<span class="sc">::</span><span class="fu">betweenness</span>(climinfl.stat, <span class="at">gmode =</span> <span class="st">&quot;graph&quot;</span>)</span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Network-level measures:</span></span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a><span class="co">#   closeness centralization</span></span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>climinfl.centr_clo <span class="ot">=</span> <span class="fu">centralization</span>(climinfl.stat, sna<span class="sc">::</span>closeness, <span class="at">mode =</span> <span class="st">&quot;graph&quot;</span>)</span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a><span class="co">#   betweenness centralization</span></span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a>climinfl.centr_btw <span class="ot">=</span> <span class="fu">centralization</span>(climinfl.stat, sna<span class="sc">::</span>betweenness, <span class="at">mode =</span> <span class="st">&quot;graph&quot;</span>)</span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Statnet-only: Gould-Fernandez Brokerage</span></span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a><span class="co"># replace ATTR with the vector of the desired attribute, such as</span></span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a><span class="co"># `climinfl.nodes$orgtype5`</span></span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">brokerage</span>(climinfl.stat, <span class="at">cl =</span> ATTR)<span class="sc">$</span>z.nli)</span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a>climinfl.nodes <span class="ot">&lt;-</span> climinfl.nodes <span class="sc">%&gt;%</span></span>
<span id="cb39-43"><a href="#cb39-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">broker.tot =</span> temp<span class="sc">$</span>t,</span>
<span id="cb39-44"><a href="#cb39-44" aria-hidden="true" tabindex="-1"></a>         <span class="at">broker.coord =</span> temp<span class="sc">$</span>w_I,</span>
<span id="cb39-45"><a href="#cb39-45" aria-hidden="true" tabindex="-1"></a>         <span class="at">broker.itin =</span> temp<span class="sc">$</span>w_O,</span>
<span id="cb39-46"><a href="#cb39-46" aria-hidden="true" tabindex="-1"></a>         <span class="at">broker.rep =</span> temp<span class="sc">$</span>b_IO,</span>
<span id="cb39-47"><a href="#cb39-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">broker.gate =</span> temp<span class="sc">$</span>b_OI,</span>
<span id="cb39-48"><a href="#cb39-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">broker.lia =</span> temp<span class="sc">$</span>b_O)</span>
<span id="cb39-49"><a href="#cb39-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-50"><a href="#cb39-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculated measures not specific to igraph or statnet:</span></span>
<span id="cb39-51"><a href="#cb39-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Build the derived and reflected centrality (dc/rc) measures</span></span>
<span id="cb39-52"><a href="#cb39-52" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;To calculate the proportion of centrality that is received, we first</span></span>
<span id="cb39-53"><a href="#cb39-53" aria-hidden="true" tabindex="-1"></a><span class="co"># square the adjacency matrix. The diagonal of the adjacency matrix is</span></span>
<span id="cb39-54"><a href="#cb39-54" aria-hidden="true" tabindex="-1"></a><span class="co"># equal to the the square of node degree. We then divide this diagonal</span></span>
<span id="cb39-55"><a href="#cb39-55" aria-hidden="true" tabindex="-1"></a><span class="co"># (squared degree) by total squared indegree (calculated by rowSums) to get</span></span>
<span id="cb39-56"><a href="#cb39-56" aria-hidden="true" tabindex="-1"></a><span class="co"># the proportion of received centrality.&quot;</span></span>
<span id="cb39-57"><a href="#cb39-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-58"><a href="#cb39-58" aria-hidden="true" tabindex="-1"></a>mat_climinfl <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">as_adjacency_matrix</span>(climinfl.ig))  <span class="co"># not &quot; attr=&#39;weight&#39;&quot;</span></span>
<span id="cb39-59"><a href="#cb39-59" aria-hidden="true" tabindex="-1"></a>mat_climinfl_sq <span class="ot">&lt;-</span> <span class="fu">t</span>(mat_climinfl) <span class="sc">%*%</span> mat_climinfl</span>
<span id="cb39-60"><a href="#cb39-60" aria-hidden="true" tabindex="-1"></a><span class="co"># alternately:</span></span>
<span id="cb39-61"><a href="#cb39-61" aria-hidden="true" tabindex="-1"></a>mat_climinfl <span class="ot">&lt;-</span> <span class="fu">as.matrix.network</span>(climinfl.stat, <span class="at">attr =</span> <span class="st">&quot;weight&quot;</span>)</span>
<span id="cb39-62"><a href="#cb39-62" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(mat_climinfl) <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb39-63"><a href="#cb39-63" aria-hidden="true" tabindex="-1"></a>mat_climinfl_sq <span class="ot">&lt;-</span> mat_climinfl <span class="sc">%*%</span> mat_climinfl</span>
<span id="cb39-64"><a href="#cb39-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-65"><a href="#cb39-65" aria-hidden="true" tabindex="-1"></a>climinfl.nodes<span class="sc">$</span>rc <span class="ot">&lt;-</span> <span class="fu">diag</span>(mat_climinfl_sq) <span class="sc">/</span> <span class="fu">rowSums</span>(mat_climinfl_sq)</span>
<span id="cb39-66"><a href="#cb39-66" aria-hidden="true" tabindex="-1"></a><span class="co"># replace missing values with 0</span></span>
<span id="cb39-67"><a href="#cb39-67" aria-hidden="true" tabindex="-1"></a>climinfl.nodes<span class="sc">$</span>rc <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.nan</span>(climinfl.nodes<span class="sc">$</span>rc), <span class="dv">0</span>, climinfl.nodes<span class="sc">$</span>rc)</span>
<span id="cb39-68"><a href="#cb39-68" aria-hidden="true" tabindex="-1"></a>climinfl.nodes<span class="sc">$</span>dc <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> climinfl.nodes<span class="sc">$</span>rc</span>
<span id="cb39-69"><a href="#cb39-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-70"><a href="#cb39-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Build the derived and reflected eigenvector measures</span></span>
<span id="cb39-71"><a href="#cb39-71" aria-hidden="true" tabindex="-1"></a>climinfl.nodes<span class="sc">$</span>eigen.rc <span class="ot">&lt;-</span> climinfl.nodes<span class="sc">$</span>eigen <span class="sc">*</span> climinfl.nodes<span class="sc">$</span>rc</span>
<span id="cb39-72"><a href="#cb39-72" aria-hidden="true" tabindex="-1"></a>climinfl.nodes<span class="sc">$</span>eigen.dc <span class="ot">&lt;-</span> climinfl.nodes<span class="sc">$</span>eigen <span class="sc">*</span> climinfl.nodes<span class="sc">$</span>dc</span></code></pre></div>
<h3 id="closeness-centrailty">Closeness centrailty</h3>
<p>From text: “The closeness centrality of a node is defined as the sum
of the geodesic distances between that node and all other nodes in a
network.”</p>
<p>Both are called in the above blocks, with
<code>sna::closeness()</code> or <code>igraph::closeness()</code> on the
respective network object.</p>
<p>From igraph::closeness help: “Closeness centrality measures how many
steps is required to access every other vertex from a given vertex.”</p>
<p>igraph and statnet have very different implementations, with options
that have to be carefully set.</p>
<h4 id="igraph-1">igraph</h4>
<p>igraph uses inverse closeness.</p>
<p>For directed networks, use
<code>mode=("in", "out", "all", "total")</code>, describing the path
type; <code>in</code> is paths <em>to</em> a vertex, <code>out</code> is
paths <em>from</em> a vertex. Undirected networks ignore this parameter.
It will use the “weight” edge attribute automatically if it’s there, or
can be overriden with something else.</p>
<h4 id="statnet-1">statnet</h4>
<p>Must specify <code>gmode</code> (type of graph) as <code>graph</code>
(undirected) or <code>digraph</code> (directed, default).
<code>cmode</code> (type of closeness centrality being measured) is one
of: <code>directed</code>, <code>undirected</code> (both standard
closeness), <code>suminvdir</code> (directed case) and
<code>suminvundir</code> (undirected case), and <code>gil-schmidt</code>
for that. The <code>suminv</code> options correspond to igraph’s default
inversion, though they’re still calculated slightly differently, so
they’re generally preferred.</p>
<p>statnet ignores the edge weights by default;
<code>ignore.eval = FALSE</code> to use them, according to the
documentation, but the results appear not to use them.</p>
<p><code>sna::closeness(climpref.stat, gmode="graph", cmode="suminvundir", ignore.eval=FALSE))</code></p>
<h3 id="closeness-centralization">Closeness centralization</h3>
<p>Closeness centralization is the network-level measure of the
<em>closeness centrality</em> node-level measure.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>climinfl.centr_clo <span class="ot">=</span> <span class="fu">centr_clo</span>(climpref.ig)<span class="sc">$</span>centralization</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>climinfl.centr_clo <span class="ot">=</span> <span class="fu">centralization</span>(climinfl.stat, <span class="at">FUN =</span> <span class="st">&quot;closeness&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;graph&quot;</span>)</span></code></pre></div>
<h3 id="betweenness-centrality">Betweenness centrality</h3>
<p>Betweenness centrality is the node-level measure of the number of
geodesics (shortest path between two nodes) on which a node sits. A high
betweenness centrality measure means a node is on many shortest-paths,
suggesting a measure of influence or power.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">betweenness</span>(climpref.ig, <span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>sna<span class="sc">::</span><span class="fu">betweenness</span>(climpref.ig, <span class="at">gmode =</span> <span class="st">&quot;graph&quot;</span>)</span></code></pre></div>
<p>The igraph version <code>directed</code> argument, for whether or not
direction should be considered, defaults to <code>TRUE</code>; it might
be wondered why it doesn’t read the directedness of the graph as a
default, but oh well.</p>
<p>The statnet version would use <code>gmode</code> of
<code>digraph</code> for a directed network, and <code>cmode</code> for
a variant undirected form; see <code>?sna::betweenness</code> for more.
Statnet appears to use weights by default; <code>weights = NA</code>
disables weights in igraph.</p>
<h3 id="betweenness-centralization">Betweenness centralization</h3>
<p>The network-level measure of betweenness centralization represents <a
href="https://en.wikipedia.org/wiki/Centrality#Freeman_centralization">Freeman
centralization</a>, at least according to the statnet documentation.</p>
<p>This is a “a measure of how central its most central node is in
relation to how central all the other nodes are”.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>climinfl.centr_btw <span class="ot">=</span> <span class="fu">centr_betw</span>(climpref.ig, <span class="at">directed =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>centralization</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>climinfl.centr_btw <span class="ot">=</span> <span class="fu">centralization</span>(climpref.stat, <span class="at">FUN =</span> <span class="st">&quot;betweenness&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;graph&quot;</span>)</span></code></pre></div>
<h3 id="burts-network-constraint">(Burt’s) network constraint</h3>
<p>igraph-only function measuring a node’s connection redundancy from 0
(none) to 1. Uses weights.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">constraint</span>(climinfl.ig)</span></code></pre></div>
<h3 id="gould-fernandez-brokerage">Gould-Fernandez Brokerage</h3>
<p>(Statnet-only)</p>
<p>From <code>?brokerage()</code>: “Gould and Fernandez (following
Marsden and others) describe brokerage as the role played by a social
actor who mediates contact between two alters.”</p>
<p>Requires a directed network with a vertex attribute used for
grouping. Returns a structure with a lot of information; tutorial refers
mainly to <code>znli</code> containing the following roles:</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>prefix</th>
<th>Role</th>
<th>Action</th>
<th>Path</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>w_I</td>
<td>Coordinator</td>
<td>mediates contact between two individuals from his or her own
group.</td>
<td>A -&gt; A -&gt; A</td>
</tr>
<tr class="even">
<td>w_O</td>
<td>Itinerant broker</td>
<td>mediates contact between two individuals from a single group to
which he or she does not belong.</td>
<td>A -&gt; B -&gt; A</td>
</tr>
<tr class="odd">
<td>b_{OI}</td>
<td>Gatekeeper</td>
<td>mediates an incoming contact from an out-group member to an in-group
member.</td>
<td>A -&gt; B -&gt; B</td>
</tr>
<tr class="even">
<td>b_{IO}</td>
<td>Representative</td>
<td>mediates an outgoing contact from an in-group member to an out-group
member.</td>
<td>A -&gt; A -&gt; B</td>
</tr>
<tr class="odd">
<td>b_O</td>
<td>Liaison</td>
<td>mediates contact between two individuals from different groups,
neither of which is the group to which he or she belongs.</td>
<td>A -&gt; B -&gt; C</td>
</tr>
<tr class="even">
<td>t</td>
<td>Total</td>
<td>Total (cumulative) brokerage role occupancy</td>
<td>(Any two)</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">brokerage</span>(climinfl.stat, <span class="at">cl =</span> climinfl.nodes<span class="sc">$</span>orgtype5)</span></code></pre></div>
<h2 id="week-6">Week 6</h2>
<p>(All statnet unless otherwise specified)</p>
<p>Calculating structural equivalence (“SE clusters”): look for nodes
that have the same pattern of ties with the same neighbors, like
siblings of a parent. Unexplained distance functions include “hamming”,
“correlation”, “gamma”. The <code>sedist()</code> function ignores edge
values (weights?).</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>flomarr.se <span class="ot">&lt;-</span> <span class="fu">equiv.clust</span>(flomarr.stat, <span class="at">equiv.fun =</span> <span class="st">&quot;sedist&quot;</span>, <span class="at">method =</span> <span class="st">&quot;hamming&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;graph&quot;</span>)</span></code></pre></div>
<p>The output of <code>equiv.clust()</code> can be plotted as a “Cluster
Dendogram”:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>flomarr.se <span class="ot">&lt;-</span> <span class="fu">equiv.clust</span>(flomarriage, <span class="at">equiv.fun =</span> <span class="st">&quot;sedist&quot;</span>, <span class="at">method =</span> <span class="st">&quot;hamming&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;graph&quot;</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(flomarr.se,<span class="at">labels =</span> flomarr.se<span class="sc">$</span>glabels)</span></code></pre></div>
<p>Annoyingly, the different <code>cluster.method</code>s “single,
average, or ward.D” are not explained in the tutorial. The default is
“complete”.</p>
<p><code>rect.hclust()</code> (visually) “cuts” the diagram at a given
height, making separate clusters:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(flomarr.se, <span class="at">labels =</span> flomarr.se<span class="sc">$</span>glabels)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rect.hclust</span>(flomarr.se<span class="sc">$</span>cluster, <span class="at">h =</span> <span class="dv">9</span>)</span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>flomarr.se <span class="ot">&lt;-</span> <span class="fu">equiv.clust</span>(flomarriage, <span class="at">equiv.fun =</span> <span class="st">&quot;sedist&quot;</span>, <span class="at">cluster.method =</span> <span class="st">&quot;single&quot;</span>,</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">method =</span> <span class="st">&quot;hamming&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;graph&quot;</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(flomarr.se,<span class="at">labels =</span> flomarr.se<span class="sc">$</span>glabels)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<div class="sourceCode" id="cb49"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
